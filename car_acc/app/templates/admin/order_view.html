<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'app/css/admin/order_view.css' %}">
    <script src="{% static 'app/js/order_view.js' %}"></script>

</head>
<body>

    {% include 'navbar.html' %}
    <div id="admin_customer_order">
        <center><h2 style="color:whitesmoke; background-color: orange;">Order Details</h2></center>
    </div>
    <div class="customer_order">
		<center><h1>Customer Orders</h1></center>
		<table class="order-table">
			<thead>
				<tr>
					<th>Order ID</th>
					<th>Customer Name</th>
                    <th>Product Name</th>
                    <th>Product image</th>

					<th>Order Date</th>
					<th>Total</th>
					<th>Status</th>
					<th>Actions</th>
				</tr>
			</thead>
            {% for product in products  %}
			<tbody>
				<tr>
					<td>#{{product.order.id}}</td>
                
					<td>{{product.customer.customer_name}}</td>
                    <td>{{product.product.product_name}}</td>
                    <td><img src="{{product.product.product_image.url}}" style="width:20%; height: 20%;"></td>
					<td>{{order.order_date}}</td>
					<td>Rs{{product.price}}</td>
					<td>

                        {% if product.is_delivered == 0 %}
                            No 
                        {% else %}
                            Yes
                        {% endif %}
                    
                    


						

                        

						
					</td>
                
                <td>
                    <a href="#" class="btn btn-danger">Ship</a>

                        <a href="#" class="btn btn-dark">Cancel</a>
                        <!-- <a href="#" class="btn btn-success">Delivery Status</a> -->


                        <button class="btn animated-button"  onclick="showDialog()">Update Delivery</button>
                        <div id="dialogOverlay" >
                            <form class="d-flex" role="contacting" action="{% url 'order_view' product.product_id product.id %}" method="POST">
                            {% csrf_token %}
                            <div class="dialog-box">
                                <b>UPDATE DELIVERY STATUS.</b>
                                {% if product.is_delivered == 0 %}
                                <button class="submit-button" type="submit" value="Yes" name="status">DELIVERED</button>
                                {% elif product.is_delivered == 1 %}
                                <button class="submit-button" type="submit" value="No" name="status">  NOT DELIVERED</button>
                                {% endif %}
                                <button class="close-button" onclick="closeDialog()">Close</button>
                            </div>
                            </form>
                        </div>
                </td>
				</tr>
				
				
			</tbody>
            {% endfor %}
		</table>
	</div>



    {% include 'footer.html' %}
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <script src="{% static 'app/js/all.min.js' %}"></script>
</body>